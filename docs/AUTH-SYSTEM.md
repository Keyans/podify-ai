# è®¤è¯ç³»ç»Ÿè¯´æ˜

æœ¬é¡¹ç›®å®ç°äº†ä¸€ä¸ªçµæ´»çš„è·¯ç”±è®¤è¯ä¿æŠ¤ç³»ç»Ÿï¼Œæ”¯æŒç²¾ç¡®é…ç½®å“ªäº›é¡µé¢éœ€è¦ç™»å½•éªŒè¯ï¼Œå“ªäº›é¡µé¢å¯ä»¥å…¬å¼€è®¿é—®ã€‚

## ğŸ”§ é…ç½®æ–‡ä»¶

### `config/routes.ts`

è¿™æ˜¯è®¤è¯ç³»ç»Ÿçš„æ ¸å¿ƒé…ç½®æ–‡ä»¶ï¼Œå®šä¹‰äº†æ‰€æœ‰è·¯ç”±çš„è®¿é—®è§„åˆ™ï¼š

```typescript
export const routeConfig = {
  // éœ€è¦è®¤è¯çš„è·¯ç”±å‰ç¼€
  protectedRoutes: [
    '/dashboard'
  ],
  
  // å…¬å¼€è·¯ç”±ï¼ˆä¸éœ€è¦è®¤è¯ï¼‰
  publicRoutes: [
    '/',
    '/login',
    '/register',
    '/test-api',
    '/test-env',
    // ... å…¶ä»–æµ‹è¯•é¡µé¢
  ],
  
  // å·²ç™»å½•ç”¨æˆ·ä¸åº”è¯¥è®¿é—®çš„è·¯ç”±
  guestOnlyRoutes: [
    '/login',
    '/register'
  ],
  
  // é»˜è®¤é‡å®šå‘é…ç½®
  defaultRedirect: {
    unauthenticated: '/login',    // æœªç™»å½•ç”¨æˆ·é‡å®šå‘
    authenticated: '/dashboard'    // å·²ç™»å½•ç”¨æˆ·é‡å®šå‘
  }
}
```

## ğŸ›¡ï¸ è®¤è¯é€»è¾‘

### è·¯ç”±ä¿æŠ¤è§„åˆ™

1. **å—ä¿æŠ¤è·¯ç”±** (`protectedRoutes`)
   - éœ€è¦ç”¨æˆ·ç™»å½•æ‰èƒ½è®¿é—®
   - æœªç™»å½•ç”¨æˆ·ä¼šè¢«é‡å®šå‘åˆ°ç™»å½•é¡µ

2. **å…¬å¼€è·¯ç”±** (`publicRoutes`)
   - ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®
   - ä¸éœ€è¦ç™»å½•éªŒè¯

3. **æ¸¸å®¢ä¸“ç”¨è·¯ç”±** (`guestOnlyRoutes`)
   - åªæœ‰æœªç™»å½•ç”¨æˆ·å¯ä»¥è®¿é—®
   - å·²ç™»å½•ç”¨æˆ·ä¼šè¢«é‡å®šå‘åˆ°dashboard

## ğŸ“ ä½¿ç”¨ç¤ºä¾‹

### æ·»åŠ æ–°çš„å—ä¿æŠ¤è·¯ç”±

å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªæ–°çš„éœ€è¦ç™»å½•çš„æ¨¡å—ï¼Œæ¯”å¦‚ `/admin`ï¼š

```typescript
// åœ¨ config/routes.ts ä¸­æ·»åŠ 
protectedRoutes: [
  '/dashboard',
  '/admin'  // æ–°å¢
]
```

### æ·»åŠ æ–°çš„å…¬å¼€è·¯ç”±

å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªå…¬å¼€è®¿é—®çš„é¡µé¢ï¼Œæ¯”å¦‚ `/about`ï¼š

```typescript
// åœ¨ config/routes.ts ä¸­æ·»åŠ 
publicRoutes: [
  '/',
  '/login',
  '/register',
  '/about'  // æ–°å¢
]
```

### æ·»åŠ æ–°çš„æ¸¸å®¢ä¸“ç”¨è·¯ç”±

å¦‚æœä½ è¦åˆ›å»ºä¸€ä¸ªåªæœ‰æœªç™»å½•ç”¨æˆ·å¯ä»¥è®¿é—®çš„é¡µé¢ï¼Œæ¯”å¦‚ `/forgot-password`ï¼š

```typescript
// åœ¨ config/routes.ts ä¸­æ·»åŠ 
guestOnlyRoutes: [
  '/login',
  '/register',
  '/forgot-password'  // æ–°å¢
]
```

## ğŸ”„ è®¤è¯æ£€æŸ¥æµç¨‹

1. ç”¨æˆ·è®¿é—®ä»»ä½•è·¯ç”±æ—¶ï¼Œå…¨å±€ä¸­é—´ä»¶ `middleware/auth.global.ts` ä¼šè‡ªåŠ¨æ‰§è¡Œ
2. æ£€æŸ¥ç›®æ ‡è·¯ç”±çš„ç±»å‹ï¼ˆå—ä¿æŠ¤/å…¬å¼€/æ¸¸å®¢ä¸“ç”¨ï¼‰
3. æ£€æŸ¥ç”¨æˆ·çš„ç™»å½•çŠ¶æ€
4. æ ¹æ®è§„åˆ™å†³å®šæ˜¯å¦å…è®¸è®¿é—®æˆ–è¿›è¡Œé‡å®šå‘

## ğŸ¯ å®é™…åœºæ™¯

### åœºæ™¯1: è®¿é—®é¦–é¡µ
- è·¯ç”±: `/`
- é…ç½®: `publicRoutes`
- ç»“æœ: âœ… ä»»ä½•äººéƒ½å¯ä»¥è®¿é—®

### åœºæ™¯2: æœªç™»å½•è®¿é—®Dashboard
- è·¯ç”±: `/dashboard`
- é…ç½®: `protectedRoutes`
- ç”¨æˆ·çŠ¶æ€: æœªç™»å½•
- ç»“æœ: âŒ é‡å®šå‘åˆ° `/login`

### åœºæ™¯3: å·²ç™»å½•è®¿é—®ç™»å½•é¡µ
- è·¯ç”±: `/login`
- é…ç½®: `guestOnlyRoutes`
- ç”¨æˆ·çŠ¶æ€: å·²ç™»å½•
- ç»“æœ: âŒ é‡å®šå‘åˆ° `/dashboard`

### åœºæ™¯4: å·²ç™»å½•è®¿é—®Dashboard
- è·¯ç”±: `/dashboard`
- é…ç½®: `protectedRoutes`
- ç”¨æˆ·çŠ¶æ€: å·²ç™»å½•
- ç»“æœ: âœ… æ­£å¸¸è®¿é—®

## ğŸ” è°ƒè¯•

ä¸­é—´ä»¶ä¼šåœ¨æ§åˆ¶å°è¾“å‡ºè¯¦ç»†çš„è®¤è¯æ£€æŸ¥ä¿¡æ¯ï¼š

```javascript
è·¯ç”±è®¤è¯æ£€æŸ¥: {
  path: "/dashboard/store",
  loggedIn: false,
  isProtected: true,
  isPublic: false,
  isGuestOnly: false
}
è®¿é—®å—ä¿æŠ¤è·¯ç”±ä½†æœªç™»å½•ï¼Œé‡å®šå‘åˆ°ç™»å½•é¡µé¢
```

## ğŸš€ é«˜çº§é…ç½®

### è‡ªå®šä¹‰é‡å®šå‘é¡µé¢

```typescript
defaultRedirect: {
  unauthenticated: '/custom-login',  // è‡ªå®šä¹‰ç™»å½•é¡µ
  authenticated: '/custom-dashboard' // è‡ªå®šä¹‰é¦–é¡µ
}
```

### è·¯å¾„åŒ¹é…è§„åˆ™

- ä½¿ç”¨ `startsWith` è¿›è¡Œå‰ç¼€åŒ¹é…
- `/dashboard` ä¼šåŒ¹é… `/dashboard/store`ã€`/dashboard/apps/collection` ç­‰æ‰€æœ‰å­è·¯å¾„
- æ ¹è·¯å¾„ `/` åªç²¾ç¡®åŒ¹é…ï¼Œä¸åŒ…å«å­è·¯å¾„

## ğŸ’¡ æœ€ä½³å®è·µ

1. **æ˜ç¡®åˆ†ç±»**: å°†æ‰€æœ‰è·¯ç”±æ˜ç¡®å½’ç±»åˆ°ä¸‰ç§ç±»å‹ä¹‹ä¸€
2. **æœ€å°æƒé™**: é»˜è®¤è¦æ±‚è®¤è¯ï¼Œåªæœ‰æ˜ç¡®æ ‡è®°çš„è·¯ç”±æ‰å…¬å¼€
3. **ç”¨æˆ·ä½“éªŒ**: å·²ç™»å½•ç”¨æˆ·è®¿é—®ç™»å½•é¡µæ—¶è‡ªåŠ¨é‡å®šå‘ï¼Œé¿å…å›°æƒ‘
4. **å®‰å…¨ä¼˜å…ˆ**: æœªæ˜ç¡®é…ç½®çš„è·¯ç”±é»˜è®¤éœ€è¦è®¤è¯

## ğŸ› ï¸ ç»´æŠ¤æŒ‡å—

å½“æ·»åŠ æ–°é¡µé¢æ—¶ï¼Œè¯·ç¡®ä¿ï¼š

1. åœ¨ `config/routes.ts` ä¸­æ·»åŠ é€‚å½“çš„è·¯ç”±é…ç½®
2. æµ‹è¯•ä¸åŒç™»å½•çŠ¶æ€ä¸‹çš„è®¿é—®è¡Œä¸º
3. æ›´æ–°æ­¤æ–‡æ¡£çš„ç¤ºä¾‹ï¼ˆå¦‚æœ‰éœ€è¦ï¼‰ 