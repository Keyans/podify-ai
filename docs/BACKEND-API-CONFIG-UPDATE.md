# 后端API配置更新说明

## 更新内容
更新了开发环境和测试环境的后端API地址配置，以确保前端Nuxt3项目能够正确调用相应环境的后端服务。

## 配置更新

### 开发环境 (.env.development)
```bash
# 旧配置
NUXT_PUBLIC_BACKEND_API=http://10.233.13.136:9999

# 新配置
NUXT_PUBLIC_BACKEND_API=http://10.233.34.88:31110
```

### 测试环境 (.env.test)
```bash
# 旧配置
NUXT_PUBLIC_BACKEND_API=https://cuz-ai.riin.com

# 新配置
NUXT_PUBLIC_BACKEND_API=http://10.233.41.245:31110
```

## 架构说明

### 前后端分离架构
- **前端服务**：Nuxt3项目 (当前项目)
  - 开发环境：运行在本地 `localhost:3000/3001`
  - 负责页面渲染、用户交互、API调用
  
- **后端服务**：独立的API服务器
  - 开发环境：`10.233.34.88:31110`
  - 测试环境：`10.233.41.245:31110`
  - 负责业务逻辑、数据处理、API接口

### API调用流程
```
前端Nuxt3应用 ──HTTP请求──> 后端API服务器
     ↑                           ↓
   用户交互                   数据库操作
     ↑                           ↓
   页面渲染 <────────JSON响应────┘
```

## 环境变量说明

### NUXT_PUBLIC_BACKEND_API
- **作用**：指定前端调用的后端API基础地址
- **使用场景**：
  - 用户注册/登录API调用
  - 业务数据获取
  - 文件上传下载
  - 所有业务API接口调用

### 其他相关配置
- `NUXT_PUBLIC_API_PROXY_TARGET`：API代理目标地址
- `NUXT_PUBLIC_API_PREFIX`：API路径前缀
- `NUXT_PUBLIC_CLIENT_TYPE`：客户端类型标识

## 影响范围

### 受影响的功能
1. **用户认证**：登录、注册、注销
2. **数据获取**：所有业务数据API调用
3. **文件处理**：图片上传、处理结果下载
4. **业务流程**：任务创建、状态查询等

### 验证方法
1. 启动开发服务器：`npm run dev`
2. 访问注册页面测试API调用
3. 检查网络请求是否指向正确的后端地址
4. 验证API响应是否正常

## 注意事项

1. **网络连通性**：确保前端服务器能够访问后端API地址
2. **端口开放**：后端服务的31110端口需要对前端服务开放
3. **协议统一**：当前使用HTTP协议，生产环境可能需要HTTPS
4. **跨域配置**：后端需要配置CORS允许前端域名访问

## 测试验证

### 开发环境测试
```bash
# 启动开发服务器
npm run dev

# 测试后端连通性
curl http://10.233.34.88:31110/health

# 验证前端能否访问后端
# 在浏览器开发者工具中查看网络请求
```

### 测试环境验证
```bash
# 构建测试版本
npm run build:test

# 启动预览
npm run preview:test

# 测试后端连通性
curl http://10.233.41.245:31110/health
```

## 生产环境规划

如需配置生产环境，应考虑：
- 使用HTTPS协议确保安全性
- 配置负载均衡和高可用
- 设置适当的安全策略和防火墙规则
- 使用域名而非IP地址提高维护性

## 更新日期
2025年1月8日 